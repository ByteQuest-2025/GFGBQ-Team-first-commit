<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TwinAI - Consensus Engine</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* --- GLOBAL RESET --- */
        html, body {
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: #fafafa;
            color: #18181b;
        }

        /* --- BACKGROUND GRAPHICS --- */
        .bg-grid {
            background-size: 40px 40px;
            background-image: radial-gradient(circle, #e4e4e7 1px, transparent 1px);
            mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        }

        .orb-wrapper {
            position: fixed;
            inset: 0;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.6;
            animation: floatOrb 10s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
        }
        .orb-1 { width: 400px; height: 400px; background: #e4e4e7; top: -100px; left: -100px; }
        .orb-2 { width: 300px; height: 300px; background: #d4d4d8; bottom: 10%; right: -50px; animation-delay: -5s; }

        @keyframes floatOrb {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(30px, 50px) scale(1.1); }
        }

        /* --- UI COMPONENTS --- */
        .glass-nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .btn-primary {
            background: #18181b;
            color: white;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(0,0,0,0.2);
            background: #000;
        }

        /* --- MOCKUP & ANIMATION --- */
        .hero-mockup-wrapper {
            perspective: 1000px;
            transform-style: preserve-3d;
            z-index: 10;
        }

        .hero-mockup {
            transform: rotateY(-5deg) rotateX(2deg);
            box-shadow: 20px 20px 60px -10px rgba(0,0,0,0.1);
            transition: transform 0.5s ease;
            animation: floatMockup 6s ease-in-out infinite;
            background: white;
            border-radius: 1.5rem;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .hero-mockup { transform: rotateY(0deg) rotateX(0deg); animation: none; }
        }
        
        .hero-mockup:hover {
            transform: rotateY(0deg) rotateX(0deg) scale(1.01);
        }

        @keyframes floatMockup {
            0%, 100% { transform: rotateY(-5deg) rotateX(2deg) translateY(0); }
            50% { transform: rotateY(-5deg) rotateX(2deg) translateY(-15px); }
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .demo-bubble { 
            opacity: 0; 
            animation: slideInUp 0.4s ease-out forwards; 
        }

        /* --- AUTH MODAL --- */
        #auth-modal { transition: opacity 0.3s ease, visibility 0.3s ease; }
        #auth-modal.hidden-modal { opacity: 0; visibility: hidden; pointer-events: none; }
        #auth-modal.visible-modal { opacity: 1; visibility: visible; pointer-events: auto; }
        
        #auth-card { transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); transform: scale(0.95); }
        #auth-modal.visible-modal #auth-card { transform: scale(1); }

        .input-field {
            width: 100%;
            background: #f4f4f5;
            border: 1px solid #e4e4e7;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            outline: none;
            transition: all 0.2s;
        }
        .input-field:focus { background: white; border-color: #18181b; box-shadow: 0 0 0 2px rgba(0,0,0,0.05); }
    </style>
</head>
<body class="relative flex flex-col min-h-screen w-full overflow-x-hidden">

    <div class="fixed inset-0 bg-grid z-0 pointer-events-none"></div>
    <div class="orb-wrapper">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <nav class="fixed w-full z-50 glass-nav h-20 flex items-center">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center gap-2.5">
                <img src="https://i.ibb.co/wr79wGNk/Whats-App-Image-2025-12-13-at-9-36-40-PM-1.jpg" alt="TwinAI Logo" class="w-9 h-9 rounded-xl shadow-lg object-cover">
                <span class="font-bold text-xl tracking-tight text-black">TwinAI</span>
            </div>
            <div class="flex items-center gap-6">
                <a href="#how-it-works" class="hidden md:block text-sm font-medium text-zinc-500 hover:text-black transition">How it Works</a>
                <button id="nav-login-btn" onclick="openAuth('login')" class="px-6 py-2.5 rounded-full btn-primary text-sm font-medium">Log In</button>
                <a id="nav-dashboard-btn" href="app.html" class="hidden px-6 py-2.5 rounded-full bg-white border border-zinc-200 text-sm font-bold text-black hover:bg-zinc-50 transition shadow-sm">Dashboard <i class="fas fa-arrow-right ml-1"></i></a>
            </div>
        </div>
    </nav>

    <main class="relative z-10 pt-32 pb-20 px-6 w-full max-w-[100vw] overflow-x-hidden">
        <div class="container mx-auto max-w-7xl grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            
            <div class="text-center lg:text-left space-y-8">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white border border-zinc-200 text-zinc-600 text-xs font-bold uppercase tracking-wider shadow-sm">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    First Consensus Engine
                </div>
                <h1 class="text-5xl md:text-7xl font-bold leading-[1.1] tracking-tight text-zinc-900">
                    AI to AI talk,<br>
                    <span class="text-zinc-400">For Your Questions?.</span>
                </h1>
                <p class="text-xl text-zinc-600 max-w-lg mx-auto lg:mx-0 leading-relaxed">
                    TwinAI forces two AI agents discuss for your question,Business plan,Accurate insights,Strategy decisions,More “expert-like” outputs, and No confusion.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start pt-2">
                    <button id="hero-cta-btn" onclick="openAuth('signup')" class="px-8 py-4 rounded-2xl btn-primary font-semibold text-lg flex items-center justify-center gap-3">
                        Start Chatting Free <i class="fas fa-arrow-right"></i>
                    </button>
                    <a href="#how-it-works" class="px-8 py-4 rounded-2xl bg-white border border-zinc-200 text-zinc-700 font-semibold hover:bg-zinc-50 transition flex items-center justify-center gap-2 shadow-sm hover:shadow-md">
                        <i class="fas fa-play-circle text-zinc-400"></i> See Logic
                    </a>
                </div>
                <div class="pt-6 flex items-center justify-center lg:justify-start gap-6 text-sm font-medium text-zinc-500">
                    <div class="flex -space-x-2">
                        <div class="w-8 h-8 rounded-full bg-zinc-200 border-2 border-white flex items-center justify-center text-xs">A</div>
                        <div class="w-8 h-8 rounded-full bg-zinc-300 border-2 border-white flex items-center justify-center text-xs">B</div>
                        <div class="w-8 h-8 rounded-full bg-black text-white border-2 border-white flex items-center justify-center text-xs">+</div>
                    </div>
                    <p>Powered by Multi-Agent Consensus</p>
                </div>
            </div>

            <div class="hero-mockup-wrapper relative w-full max-w-md mx-auto lg:max-w-full lg:px-12 mt-12 lg:mt-0">
                
                <div class="absolute top-28 left-0 md:top-1/2 md:-left-8 z-20 bg-white border border-zinc-200 px-3 py-1.5 rounded-r-lg md:rounded-lg shadow-lg text-xs font-bold text-zinc-800 animate-bounce" style="animation-duration: 3s;">
                    <i class="fas fa-brain text-blue-500 mr-1"></i> Agent A
                </div>
                
                <div class="absolute bottom-28 right-0 md:bottom-1/4 md:-right-8 z-20 bg-white border border-zinc-200 px-3 py-1.5 rounded-l-lg md:rounded-lg shadow-lg text-xs font-bold text-zinc-800 animate-bounce" style="animation-duration: 4s;">
                    <i class="fas fa-search text-purple-500 mr-1"></i> Agent B
                </div>

                <div class="relative border border-zinc-100 hero-mockup overflow-hidden flex flex-col h-[400px] md:h-[500px]">
                    <div class="bg-zinc-50 p-4 border-b border-zinc-100 flex items-center gap-2 shrink-0">
                        <div class="flex gap-1.5">
                            <div class="w-2.5 h-2.5 rounded-full bg-zinc-300"></div>
                            <div class="w-2.5 h-2.5 rounded-full bg-zinc-300"></div>
                        </div>
                        <div class="mx-auto bg-white px-3 py-1 rounded-md text-[10px] font-mono text-zinc-400 border border-zinc-100 shadow-sm">
                            twinai.consensus.live
                        </div>
                    </div>

                    <div id="hero-demo-chat" class="flex-1 p-5 space-y-4 overflow-y-auto relative bg-white flex flex-col">
                        </div>

                    <div class="p-4 border-t border-zinc-100 bg-white shrink-0">
                        <div class="h-10 bg-zinc-50 rounded-xl border border-zinc-100 w-full animate-pulse"></div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <section id="how-it-works" class="py-24 bg-white border-t border-zinc-100 relative z-10 w-full overflow-hidden">
        <div class="container mx-auto px-6 max-w-6xl">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-zinc-900 mb-4">The Ping-Pong Protocol</h2>
                <p class="text-zinc-500">Adversarial testing guarantees 99.9% accuracy.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-12 relative">
                <div class="hidden md:block absolute top-12 left-0 w-full h-[1px] bg-zinc-200 z-0"></div>
                <div class="relative z-10 flex flex-col items-center text-center bg-white p-4">
                    <div class="w-20 h-20 bg-zinc-50 border border-zinc-200 rounded-2xl flex items-center justify-center mb-6 shadow-sm"><i class="fas fa-lightbulb text-2xl text-blue-500"></i></div>
                    <h3 class="text-lg font-bold text-zinc-900 mb-2">1. The Proposal</h3>
                    <p class="text-sm text-zinc-500">Agent A analyzes your query and drafts a detailed initial solution.</p>
                </div>
                <div class="relative z-10 flex flex-col items-center text-center bg-white p-4">
                    <div class="w-20 h-20 bg-zinc-50 border border-zinc-200 rounded-2xl flex items-center justify-center mb-6 shadow-sm"><i class="fas fa-search text-2xl text-purple-500"></i></div>
                    <h3 class="text-lg font-bold text-zinc-900 mb-2">2. The Critique</h3>
                    <p class="text-sm text-zinc-500">Agent B reviews the draft specifically to find errors, bias, or missing logic.</p>
                </div>
                <div class="relative z-10 flex flex-col items-center text-center bg-white p-4">
                    <div class="w-20 h-20 bg-black text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg"><i class="fas fa-check-double text-2xl"></i></div>
                    <h3 class="text-lg font-bold text-zinc-900 mb-2">3. The Verdict</h3>
                    <p class="text-sm text-zinc-500">The Consensus Engine synthesizes the perfect, hallucination-free answer.</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-8 bg-zinc-50 border-t border-zinc-100 w-full">
        <div class="container mx-auto px-6 text-center text-sm text-zinc-400">&copy; 2025 TwinAI.</div>
    </footer>

    <div id="auth-modal" class="fixed inset-0 z-[60] flex items-center justify-center bg-black/40 backdrop-blur-sm hidden-modal">
        <div id="auth-card" class="bg-white w-full max-w-md p-8 rounded-3xl shadow-2xl relative m-4">
            <button onclick="closeAuth()" class="absolute top-4 right-4 text-zinc-400 hover:text-black p-2"><i class="fas fa-times text-xl"></i></button>
            <div class="text-center mb-8">
                <div class="w-12 h-12 bg-black rounded-xl flex items-center justify-center text-white shadow-lg mx-auto mb-4"><i class="fas fa-fingerprint text-xl"></i></div>
                <h2 id="modal-title" class="text-2xl font-bold text-zinc-900">Welcome Back</h2>
                <p id="modal-desc" class="text-zinc-500 text-sm mt-1">Enter your details to access the engine.</p>
            </div>
            <form id="auth-form" class="space-y-4" onsubmit="handleAuth(event)">
                <div id="name-group" class="hidden">
                    <label class="block text-xs font-bold text-zinc-500 mb-1 uppercase tracking-wide">Full Name</label>
                    <input type="text" id="name" class="input-field" placeholder="John Doe">
                </div>
                <div><label class="block text-xs font-bold text-zinc-500 mb-1 uppercase tracking-wide">Email</label><input type="email" id="email" class="input-field" placeholder="you@example.com" required></div>
                <div><label class="block text-xs font-bold text-zinc-500 mb-1 uppercase tracking-wide">Password</label><input type="password" id="password" class="input-field" placeholder="••••••••" required></div>
                <div id="error-msg" class="text-red-500 text-xs text-center hidden"></div>
                <button type="submit" id="submit-btn" class="w-full py-3.5 rounded-xl btn-primary font-bold text-sm mt-2">Sign In</button>
            </form>
            <div class="text-center mt-6 pt-6 border-t border-zinc-100">
                <p class="text-sm text-zinc-500"><span id="toggle-text">Don't have an account?</span> <button onclick="toggleMode()" id="toggle-btn" class="text-black font-bold hover:underline">Sign Up</button></p>
            </div>
        </div>
    </div>

    <script src="supabase-auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const { data: { session } } = await supabase.auth.getSession();
                if (session) {
                    document.getElementById('nav-login-btn').classList.add('hidden');
                    document.getElementById('nav-dashboard-btn').classList.remove('hidden');
                    const cta = document.getElementById('hero-cta-btn');
                    cta.innerHTML = 'Go to Dashboard <i class="fas fa-arrow-right"></i>';
                    cta.onclick = () => window.location.href = 'app.html';
                }
            } catch (e) { console.log(e); }
            playDemo();
        });

        // Auth Logic
        let isSignup = false;
        function openAuth(mode) {
            const m = document.getElementById('auth-modal'); m.classList.remove('hidden-modal'); m.classList.add('visible-modal');
            if (mode === 'signup') { isSignup = false; toggleMode(); } else { isSignup = true; toggleMode(); }
        }
        function closeAuth() { const m = document.getElementById('auth-modal'); m.classList.remove('visible-modal'); m.classList.add('hidden-modal'); }
        function toggleMode() {
            isSignup = !isSignup;
            document.getElementById('modal-title').innerText = isSignup ? "Create Account" : "Welcome Back";
            document.getElementById('name-group').classList.toggle('hidden', !isSignup);
            document.getElementById('name').required = isSignup;
            document.getElementById('submit-btn').innerText = isSignup ? "Create Account" : "Sign In";
            document.getElementById('toggle-text').innerText = isSignup ? "Already have an account?" : "Don't have an account?";
            document.getElementById('toggle-btn').innerText = isSignup ? "Log In" : "Sign Up";
        }
        async function handleAuth(e) {
            e.preventDefault();
            const email = document.getElementById('email').value, password = document.getElementById('password').value, name = document.getElementById('name').value;
            const btn = document.getElementById('submit-btn'); btn.disabled = true; btn.innerText = "Processing...";
            try {
                if (isSignup) await signUp(email, password, name); else await signIn(email, password);
                window.location.href = 'app.html';
            } catch (err) {
                document.getElementById('error-msg').innerText = err.message; document.getElementById('error-msg').classList.remove('hidden');
                btn.disabled = false; btn.innerText = isSignup ? "Create Account" : "Sign In";
            }
        }

        // Chat Animation
        function playDemo() {
            const container = document.getElementById('hero-demo-chat');
            if (!container) return;
            
            const steps = [
                { type: 'user', text: "How do I validate a startup idea?", delay: 800 },
                { type: 'agent-a', text: "I suggest creating a landing page and running ads...", delay: 2000 },
                { type: 'agent-b', text: "Wait. Before spending money, interview 10 potential users first.", delay: 3500 },
                { type: 'system', text: "Consensus: Start with user interviews (free), then build a landing page.", delay: 5500 }
            ];

            let stepIndex = 0;
            function nextStep() {
                if (stepIndex >= steps.length) {
                    setTimeout(() => { container.innerHTML = ''; stepIndex = 0; nextStep(); }, 5000);
                    return;
                }
                const item = steps[stepIndex];
                const div = document.createElement('div');
                div.className = "flex w-full mb-3 demo-bubble";
                
                let innerHTML = "";
                if (item.type === 'user') {
                    div.classList.add('justify-end');
                    innerHTML = `<div class="max-w-[85%] p-3 rounded-2xl rounded-br-none bg-black text-white text-xs shadow-sm">${item.text}</div>`;
                } else if (item.type === 'agent-a') {
                    div.classList.add('justify-start');
                    innerHTML = `<div class="max-w-[85%] p-3 rounded-2xl rounded-tl-none bg-white border border-zinc-200 text-zinc-600 text-xs shadow-sm"><i class="fas fa-brain text-blue-500 mr-1.5"></i> ${item.text}</div>`;
                } else if (item.type === 'agent-b') {
                    div.classList.add('justify-end');
                    innerHTML = `<div class="max-w-[85%] p-3 rounded-2xl rounded-tr-none bg-white border border-zinc-200 text-zinc-600 text-xs shadow-sm text-right"><i class="fas fa-search text-purple-500 mr-1.5"></i> ${item.text}</div>`;
                } else {
                    div.classList.add('justify-center');
                    innerHTML = `<div class="max-w-[90%] p-2 rounded-xl bg-zinc-100 text-zinc-600 text-[10px] font-medium text-center border border-zinc-200"><i class="fas fa-check-circle text-green-500 mr-1"></i> ${item.text}</div>`;
                }

                div.innerHTML = innerHTML;
                container.appendChild(div);
                container.scrollTop = container.scrollHeight;

                const nextItem = steps[stepIndex + 1];
                const waitTime = nextItem ? (nextItem.delay - item.delay) : 1000;
                stepIndex++;
                setTimeout(nextStep, waitTime);
            }
            container.innerHTML = '';
            nextStep();
        }
    </script>
</body>
</html>